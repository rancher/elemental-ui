{"version":3,"sources":["webpack://elemental-1.3.0/./detail/elemental.cattle.io.machineregistration.vue","webpack://elemental-1.3.0/detail/elemental.cattle.io.machineregistration.vue","webpack://elemental-1.3.0/./detail/elemental.cattle.io.machineregistration.vue?e8ff","webpack://elemental-1.3.0/./detail/elemental.cattle.io.machineregistration.vue?8288","webpack://elemental-1.3.0/./detail/elemental.cattle.io.machineregistration.vue?24d9","webpack://elemental-1.3.0/./detail/elemental.cattle.io.machineregistration.vue?9e72","webpack://elemental-1.3.0/./detail/elemental.cattle.io.machineregistration.vue?6bae"],"names":["render","_vm","this","_c","_self","value","attrs","doneRoute","mode","errors","on","e","save","done","staticClass","_v","_s","t","directives","name","rawName","registrationUrl","expression","metadata","namespace","download","ref","editorMode","model","cloudConfig","callback","$$v","staticRenderFns","components","Loading","CruResource","YamlEditor","DetailText","AsyncButton","BuildMedia","mixins","CreateEditView","props","type","Object","required","String","data","spec","saferDump","yamlErrors","watch","handler","neu","parsed","jsyaml","load","exceptionToErrorsArray","immediate","computed","_this$value","status","registrationURL","isCreate","_CREATE","isView","_EDIT","EDITOR_MODES","VIEW_CODE","EDIT_CODE","methods","btnCb","downloadMachineRegistration","error","component","content","__esModule","default","module","i","locals","exports","add","___CSS_LOADER_API_IMPORT___","push"],"mappings":"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","file":"elemental-1.3.0.umd.min.detail.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (!_vm.value)?_c('Loading'):_c('CruResource',{attrs:{\"done-route\":_vm.doneRoute,\"can-yaml\":true,\"mode\":_vm.mode,\"resource\":_vm.value,\"errors\":_vm.errors},on:{\"error\":e=>_vm.errors = e,\"finish\":_vm.save,\"cancel\":_vm.done}},[_c('div',{staticClass:\"row mt-40 mb-40\"},[_c('div',{staticClass:\"col span-8\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.machineRegistration.create.registrationURL.title')))]),_c('DetailText',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.registrationUrl),expression:\"registrationUrl\"}],attrs:{\"data-testid\":\"registration-url\",\"value\":_vm.registrationUrl,\"label\":_vm.t('elemental.machineRegistration.create.registrationURL.label')}})],1)]),_c('div',[_c('BuildMedia',{attrs:{\"display-reg-endpoints\":false,\"registration-endpoint\":`${_vm.value.metadata.namespace}/${_vm.value.metadata.name}`}})],1),_c('div',{staticClass:\"row mb-40 mt-30\"},[_c('div',{staticClass:\"col span-12\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.machineRegistration.edit.imageSetup')))]),_c('p',{directives:[{name:\"clean-html\",rawName:\"v-clean-html\",value:(_vm.t('elemental.machineRegistration.edit.downloadMachineRegistrationFile', {}, true)),expression:\"t('elemental.machineRegistration.edit.downloadMachineRegistrationFile', {}, true)\"}]}),_c('AsyncButton',{staticClass:\"mt-10\",attrs:{\"mode\":\"downloadMachineReg\",\"data-testid\":\"download-btn\"},on:{\"click\":_vm.download}})],1)]),_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.machineRegistration.create.cloudConfiguration')))]),_c('YamlEditor',{ref:\"yamleditor\",staticClass:\"mb-20\",attrs:{\"editor-mode\":_vm.editorMode},model:{value:(_vm.cloudConfig),callback:function ($$v) {_vm.cloudConfig=$$v},expression:\"cloudConfig\"}})],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\nimport DetailText from '@shell/components/DetailText';\nimport AsyncButton from '@shell/components/AsyncButton';\n\nimport jsyaml from 'js-yaml';\nimport { saferDump } from '@shell/utils/create-yaml';\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\nimport { exceptionToErrorsArray } from '@shell/utils/error';\nimport BuildMedia from '../components/BuildMedia';\n\nexport default {\n  name:       'MachineRegistrationDetailView',\n  components: {\n    Loading,\n    CruResource,\n    YamlEditor,\n    DetailText,\n    AsyncButton,\n    BuildMedia\n  },\n  mixins:     [CreateEditView],\n  props:      {\n    value: {\n      type:     Object,\n      required: true\n    },\n    mode: {\n      type:     String,\n      required: true\n    },\n  },\n  data() {\n    return {\n      cloudConfig: typeof this.value.spec === 'string' ? this.value.spec : saferDump(this.value.spec),\n      yamlErrors:  null\n    };\n  },\n  watch: {\n    cloudConfig: {\n      handler(neu) {\n        try {\n          const parsed = jsyaml.load(neu);\n\n          this.value.spec = parsed;\n          this.yamlErrors = null;\n        } catch (e) {\n          this.yamlErrors = exceptionToErrorsArray(e);\n        }\n      },\n      immediate: true\n    }\n  },\n  computed: {\n    registrationUrl() {\n      return this.value?.status?.registrationURL || '';\n    },\n    isCreate() {\n      return this.mode === _CREATE;\n    },\n    isView() {\n      return this.mode !== _CREATE && this.mode !== _EDIT;\n    },\n    editorMode() {\n      if (!this.isView) {\n        return EDITOR_MODES.EDIT_CODE;\n      }\n\n      return EDITOR_MODES.VIEW_CODE;\n    }\n  },\n  methods: {\n    async download(btnCb) {\n      try {\n        await this.value.downloadMachineRegistration();\n        btnCb(true);\n      } catch (error) {\n        btnCb(false);\n      }\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n    @cancel=\"done\"\n  >\n    <div\n      class=\"row mt-40 mb-40\"\n    >\n      <div class=\"col span-8\">\n        <h3>{{ t('elemental.machineRegistration.create.registrationURL.title') }}</h3>\n        <DetailText\n          v-show=\"registrationUrl\"\n          data-testid=\"registration-url\"\n          :value=\"registrationUrl\"\n          :label=\"t('elemental.machineRegistration.create.registrationURL.label')\"\n        />\n      </div>\n    </div>\n    <div>\n      <BuildMedia\n        :display-reg-endpoints=\"false\"\n        :registration-endpoint=\"`${value.metadata.namespace}/${value.metadata.name}`\"\n      />\n    </div>\n    <div\n      class=\"row mb-40 mt-30\"\n    >\n      <div class=\"col span-12\">\n        <h3>{{ t('elemental.machineRegistration.edit.imageSetup') }}</h3>\n        <p v-clean-html=\"t('elemental.machineRegistration.edit.downloadMachineRegistrationFile', {}, true)\" />\n        <AsyncButton\n          class=\"mt-10\"\n          mode=\"downloadMachineReg\"\n          data-testid=\"download-btn\"\n          @click=\"download\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-20\">\n      <div class=\"col span-6\">\n        <h3>{{ t('elemental.machineRegistration.create.cloudConfiguration') }}</h3>\n        <YamlEditor\n          ref=\"yamleditor\"\n          v-model=\"cloudConfig\"\n          class=\"mb-20\"\n          :editor-mode=\"editorMode\"\n        />\n      </div>\n    </div>\n  </CruResource>\n</template>\n\n<style lang=\"scss\" scoped>\n.flex {\n  display: flex;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./elemental.cattle.io.machineregistration.vue?vue&type=template&id=27c7cd6c&scoped=true\"\nimport script from \"./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"\nexport * from \"./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"\nimport style0 from \"./elemental.cattle.io.machineregistration.vue?vue&type=style&index=0&id=27c7cd6c&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"27c7cd6c\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.machineregistration.vue?vue&type=style&index=0&id=27c7cd6c&prod&lang=scss&scoped=true\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.machineregistration.vue?vue&type=style&index=0&id=27c7cd6c&prod&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5157f308\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".flex[data-v-27c7cd6c]{display:flex}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}