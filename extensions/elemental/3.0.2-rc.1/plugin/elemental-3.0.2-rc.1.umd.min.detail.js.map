{"version":3,"file":"elemental-3.0.2-rc.1.umd.min.detail.js","mappings":"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","sources":["webpack://elemental-3.0.2-rc.1/./detail/elemental.cattle.io.machineregistration.vue","webpack://elemental-3.0.2-rc.1/./detail/elemental.cattle.io.machineregistration.vue?7973","webpack://elemental-3.0.2-rc.1/./detail/elemental.cattle.io.machineregistration.vue?a613","webpack://elemental-3.0.2-rc.1/./detail/elemental.cattle.io.machineregistration.vue?c47f"],"sourcesContent":["<script>\nimport Loading from '@shell/components/Loading.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\nimport DetailText from '@shell/components/DetailText';\nimport AsyncButton from '@shell/components/AsyncButton';\n\nimport jsyaml from 'js-yaml';\nimport { saferDump } from '@shell/utils/create-yaml';\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\nimport { exceptionToErrorsArray } from '@shell/utils/error';\nimport BuildMedia from '../components/BuildMedia';\n\nexport default {\n  name:       'MachineRegistrationDetailView',\n  components: {\n    Loading,\n    CruResource,\n    YamlEditor,\n    DetailText,\n    AsyncButton,\n    BuildMedia\n  },\n  mixins:     [CreateEditView],\n  props:      {\n    value: {\n      type:     Object,\n      required: true\n    },\n    mode: {\n      type:     String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      cloudConfig: typeof this.value.spec === 'string' ? this.value.spec : saferDump(this.value.spec),\n      yamlErrors:  null\n    };\n  },\n  watch: {\n    cloudConfig: {\n      handler(neu) {\n        try {\n          const parsed = jsyaml.load(neu);\n\n          this.value.spec = parsed;\n          this.yamlErrors = null;\n        } catch (e) {\n          this.yamlErrors = exceptionToErrorsArray(e);\n        }\n      },\n      immediate: true\n    }\n  },\n  computed: {\n    registrationUrl() {\n      return this.value?.status?.registrationURL || '';\n    },\n    isCreate() {\n      return this.mode === _CREATE;\n    },\n    isView() {\n      return this.mode !== _CREATE && this.mode !== _EDIT;\n    },\n    editorMode() {\n      if (!this.isView) {\n        return EDITOR_MODES.EDIT_CODE;\n      }\n\n      return EDITOR_MODES.VIEW_CODE;\n    }\n  },\n  methods: {\n    async download(btnCb) {\n      try {\n        await this.value.downloadMachineRegistration();\n        btnCb(true);\n      } catch (error) {\n        btnCb(false);\n      }\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n    @cancel=\"done\"\n  >\n    <div\n      class=\"row mt-40 mb-40\"\n    >\n      <div class=\"col span-8\">\n        <h3>{{ t('elemental.machineRegistration.create.registrationURL.title') }}</h3>\n        <DetailText\n          v-show=\"registrationUrl\"\n          data-testid=\"registration-url\"\n          :value=\"registrationUrl\"\n          :label=\"t('elemental.machineRegistration.create.registrationURL.label')\"\n        />\n      </div>\n    </div>\n    <div>\n      <BuildMedia\n        :display-reg-endpoints=\"false\"\n        :registration-endpoint=\"`${value.metadata.namespace}/${value.metadata.name}`\"\n        :resource=\"value.type\"\n        :mode=\"mode\"\n      />\n    </div>\n    <div\n      class=\"row mb-40 mt-30\"\n    >\n      <div class=\"col span-12\">\n        <h3>{{ t('elemental.machineRegistration.edit.imageSetup') }}</h3>\n        <p v-clean-html=\"t('elemental.machineRegistration.edit.downloadMachineRegistrationFile', {}, true)\" />\n        <AsyncButton\n          class=\"mt-10\"\n          mode=\"downloadMachineReg\"\n          data-testid=\"download-btn\"\n          @click=\"download\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-20\">\n      <div class=\"col span-6\">\n        <h3>{{ t('elemental.machineRegistration.create.cloudConfiguration') }}</h3>\n        <YamlEditor\n          ref=\"yamleditor\"\n          v-model:value=\"cloudConfig\"\n          class=\"mb-20\"\n          :editor-mode=\"editorMode\"\n        />\n      </div>\n    </div>\n  </CruResource>\n</template>\n\n<style lang=\"scss\" scoped>\n.flex {\n  display: flex;\n}\n</style>\n","import { render } from \"./elemental.cattle.io.machineregistration.vue?vue&type=template&id=dc423ff8&scoped=true\"\nimport script from \"./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"\nexport * from \"./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js\"\n\nimport \"./elemental.cattle.io.machineregistration.vue?vue&type=style&index=0&id=dc423ff8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-dc423ff8\"]])\n\nexport default __exports__","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".flex[data-v-dc423ff8]{display:flex}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./elemental.cattle.io.machineregistration.vue?vue&type=style&index=0&id=dc423ff8&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"412caf98\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["class","$props","value","_createBlock","_component_CruResource","_ctx","doneRoute","mode","resource","errors","onError","_cache","e","onFinish","save","onCancel","done","_createElementVNode","_hoisted_1","_hoisted_2","_toDisplayString","t","_createVNode","_component_DetailText","$options","registrationUrl","label","_component_BuildMedia","metadata","namespace","name","type","_hoisted_3","_hoisted_4","_component_AsyncButton","onClick","download","_hoisted_5","_hoisted_6","_component_YamlEditor","ref","$data","cloudConfig","$event","editorMode","_component_Loading","key","components","Loading","CruResource","YamlEditor","DetailText","AsyncButton","BuildMedia","mixins","CreateEditView","props","Object","required","String","data","this","spec","saferDump","yamlErrors","watch","handler","neu","parsed","jsyaml","exceptionToErrorsArray","immediate","computed","status","registrationURL","isCreate","_CREATE","isView","_EDIT","EDITOR_MODES","VIEW_CODE","EDIT_CODE","methods","btnCb","downloadMachineRegistration","error","__exports__","render","___CSS_LOADER_EXPORT___","push","module","id","content","__esModule","default","locals","exports","add"],"sourceRoot":""}