{"version":3,"sources":["webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/utils/selector.js","webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/mixins/create-edit-view/index.js","webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/components/form/Select.vue?1f00","webpack://elemental-0.1.0/../../node_modules/@rancher/shell/components/form/Select.vue","webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/components/form/Select.vue?552d","webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/components/form/Select.vue","webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/components/form/Select.vue?5d98","webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/components/form/MatchExpressions.vue?b8ef","webpack://elemental-0.1.0/../../node_modules/@rancher/shell/components/form/MatchExpressions.vue","webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/components/form/MatchExpressions.vue?4710","webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/components/form/MatchExpressions.vue","webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/components/form/Select.vue?782e","webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/components/form/MatchExpressions.vue?4fcd","webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/components/form/Select.vue?7de3","webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/components/form/MatchExpressions.vue?f3a9","webpack://elemental-0.1.0//Users/nwm/dev/nwm/elemental-ui/node_modules/@rancher/shell/components/form/MatchExpressions.vue?2c58"],"names":["parseCache","OP_MAP","parse","labelSelector","replace","match","out","parens","length","str","val","split","push","parts","filter","x","rule","trim","key","operator","toLowerCase","values","startsWith","substr","convert","matchLabelsObj","matchExpressions","keys","Object","value","existing","findBy","addObject","simplify","matchExpressionsInput","matchLabels","impossible","seen","expr","includes","assign","matches","obj","selector","rules","isArray","labels","metadata","asInt","parseInt","exists","isNaN","Math","min","apply","max","matching","ary","impl","props","mode","type","String","default","_EDIT","realMode","as","_YAML","required","initialValue","liveValue","doneEvent","Boolean","render","_obj","_vm","this","_h","$createElement","_c","_self","ref","staticClass","class","disabled","isView","focused","status","taggable","$attrs","multiple","on","focusSearch","_g","_b","attrs","appendToBody","positionDropdown","opt","getOptionKey","getOptionLabel","optionLabel","options","closeOnSelect","mappedKeys","placeholder","reduce","isSearchable","selectable","e","$emit","onBlur","onFocus","resizeHandler","scopedSlots","_u","fn","option","onClickOption","_v","_s","label","_l","_","slot","scope","_t","$listeners","tooltip","hoverTooltip","_e","validationMessage","staticRenderFns","components","LabeledTooltip","mixins","getKeyForOption","optionKey","placement","popperOverride","methods","width","calculatePosition","focus","el","get","report","alert","computed","requiredField","ruleMessages","showRemove","$event","t","row","index","id","directives","name","rawName","expression","domProps","target","composing","$set","update","ops","model","callback","$$v","style","padding","removeRule","addRule","Select","initialEmptyRow","data","newRule","custom","node","pod","removeObject","matchExpression","component","___CSS_LOADER_API_IMPORT___","exports","module","i","content","__esModule","locals","add"],"mappings":"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","file":"elemental-0.1.0.umd.min.vendors~edit~machine-config.js","sourcesContent":["import { isArray, addObject, findBy } from '@shell/utils/array';\n\nconst parseCache = {};\n\nconst OP_MAP = {\n  '=':  'In',\n  '==': 'In',\n  '!=': 'NotIn',\n  '<':  'Lt',\n  '>':  'Gt',\n};\n\n// Parse a labelSelector string\nexport function parse(labelSelector) {\n  // matchLabels:\n  // comma-separated list, all rules ANDed together\n  // spaces may be encoded as +\n  //\n  // Equals:      foo = bar\n  // Not Equals:  bar != baz\n  // Key Exists:  optional.prefix/just-some-key\n  // Key Doesn't: !optional.prefix/just-some-key\n  // In Set:      environment in (production,qa)\n  // Not in Set:  environment notin (production,qa)\n\n  // Convert into matchExpressions, which newer resources support\n  // and express the same things\n  //\n  // Object of:\n  // key: optional.prefix/some-key\n  // operator: In, NotIn, Exists, or DoesNotExist\n  // values:  [array, of, values, even, if, only, one]\n\n  labelSelector = labelSelector.replace(/\\+/g, ' ');\n\n  if ( parseCache[labelSelector] ) {\n    return parseCache[labelSelector];\n  }\n\n  let match;\n  const out = [];\n  const parens = [];\n\n  // Substitute out all the parenthetical lists because they might have commas in them\n  match = labelSelector.match(/\\([^)]+\\)/g);\n  if ( match && match.length ) {\n    for ( const str of match ) {\n      const val = str.replace(/^\\s*\\(\\s*/, '').replace(/\\s*\\)\\s*$/, '').split(/\\s*,\\s*/);\n\n      parens.push(val);\n      labelSelector = labelSelector.replace(str, ` @${ parens.length - 1 } `);\n    }\n  }\n\n  const parts = labelSelector.split(/\\s*,\\s*/).filter(x => !!x);\n\n  for ( let rule of parts ) {\n    rule = rule.trim();\n\n    match = rule.match(/^(.*?)\\s+((not\\s*)?in)\\s+@(\\d+)*$/i);\n\n    if ( match ) {\n      out.push({\n        key:      match[1].trim(),\n        operator: match[2].toLowerCase().replace(/\\s/g, '') === 'notin' ? 'NotIn' : 'In',\n        values:   parens[match[4].trim()],\n      });\n\n      continue;\n    }\n\n    match = rule.match(/^([^!=]*)\\s*(\\!=|=|==|>|<)\\s*([^!=]*)$/);\n    if ( match ) {\n      out.push({\n        key:      match[1].trim(),\n        operator: OP_MAP[match[2]],\n        values:   [match[3].trim()],\n      });\n\n      continue;\n    }\n\n    if ( rule.startsWith('!') ) {\n      out.push({\n        key:      rule.substr(1).trim(),\n        operator: 'DoesNotExist'\n      });\n\n      continue;\n    }\n\n    out.push({\n      key:      rule.trim(),\n      operator: 'Exists'\n    });\n  }\n\n  parseCache[labelSelector] = out;\n\n  return out;\n}\n\n// Convert a Selector object to matchExpressions\nexport function convertSelectorObj(obj) {\n  return convert(obj.matchLabels || {}, obj.matchExpressions || []);\n}\n\n// Convert matchLabels to matchExpressions\n// Optionally combining with an existing set of matchExpressions\nexport function convert(matchLabelsObj, matchExpressions) {\n  const keys = Object.keys(matchLabelsObj || {});\n  const out = matchExpressions || [];\n\n  for ( const key of keys ) {\n    const value = matchLabelsObj[key];\n    const existing = findBy(out, { key, operator: 'In' });\n\n    if ( existing ) {\n      addObject(existing.values, value);\n    } else {\n      out.push({\n        key,\n        operator: 'In',\n        values:   [value],\n      });\n    }\n  }\n\n  return out;\n}\n\n// Convert matchExpressions to matchLabels when possible,\n// returning the simplest combination of them.\nexport function simplify(matchExpressionsInput) {\n  const matchLabels = {};\n  const matchExpressions = [];\n\n  // Look for keys with more than one \"In\" expression and disqualify them from simplifying\n  const impossible = [];\n  const seen = {};\n\n  for ( const expr of matchExpressionsInput ) {\n    if ( expr.operator !== 'In' ) {\n      continue;\n    }\n\n    if ( seen[expr.key] ) {\n      addObject(impossible, expr.key);\n    } else {\n      seen[expr.key] = true;\n    }\n  }\n\n  for ( const expr of matchExpressionsInput ) {\n    if ( expr.operator === 'In' && expr.values.length === 1 && !impossible.includes(expr.key) ) {\n      matchLabels[expr.key] = expr.values[0];\n    } else {\n      matchExpressions.push(Object.assign({}, expr));\n    }\n  }\n\n  return { matchLabels, matchExpressions };\n}\n\nexport function matches(obj, selector) {\n  let rules = [];\n\n  if ( typeof selector === 'string' ) {\n    // labelSelector string\n    rules = parse(selector);\n  } else if ( isArray(selector) ) {\n    // Already matchExpression\n    rules = selector;\n  } else if ( typeof selector === 'object' && selector ) {\n    // matchLabels object\n    rules = convert(selector);\n  } else {\n    return false;\n  }\n\n  const labels = obj?.metadata?.labels || {};\n\n  for ( const rule of rules ) {\n    const value = labels[rule.key];\n    const asInt = parseInt(value, 10);\n    const exists = typeof labels[rule.key] !== 'undefined';\n\n    switch ( rule.operator ) {\n    case 'Exists':\n      if ( !exists ) {\n        return false;\n      }\n      break;\n    case 'DoesNotExist':\n      if ( exists ) {\n        return false;\n      }\n      break;\n    case 'In':\n      if ( !value || !rule.values.length || !rule.values.includes(value) ) {\n        return false;\n      }\n      break;\n    case 'NotIn':\n      if ( rule.values.includes(value) ) {\n        return false;\n      }\n      break;\n    case 'Lt':\n      if ( isNaN(asInt) || asInt >= Math.min.apply(null, rule.values) ) {\n        return false;\n      }\n      break;\n    case 'Gt':\n      if ( isNaN(asInt) || asInt <= Math.max.apply(null, rule.values) ) {\n        return false;\n      }\n      break;\n    }\n  }\n\n  return true;\n}\n\nexport function matching(ary, selector) {\n  return ary.filter(obj => matches(obj, selector));\n}\n","import { _EDIT, _YAML } from '@shell/config/query-params';\nimport impl from './impl';\n\nexport default {\n  ...impl,\n\n  props: {\n    mode: {\n      type:     String,\n      default: _EDIT,\n    },\n\n    realMode: {\n      type:     String,\n      default: _EDIT,\n    },\n\n    as: {\n      type:     String,\n      default: _YAML,\n    },\n\n    // The model to be manipulated by the form\n    value: {\n      type:     Object,\n      required: true,\n    },\n\n    // A clone of the model before it's been changed, for conflict resolution\n    initialValue: {\n      type:     Object,\n      default: null,\n    },\n\n    // The 'live' equivalent of this model in the store\n    liveValue: {\n      type:     Object,\n      default: null,\n    },\n\n    doneEvent: {\n      type:    Boolean,\n      default: false,\n    },\n  },\n};\n","var render = function () {\nvar _obj;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"select\",staticClass:\"unlabeled-select\",class:( _obj = {\n    disabled: _vm.disabled && !_vm.isView,\n    focused: _vm.focused\n  }, _obj[_vm.mode] = true, _obj[_vm.status] = _vm.status, _obj.taggable = _vm.$attrs.taggable, _obj.taggable = _vm.$attrs.multiple, _obj ),on:{\"focus\":_vm.focusSearch}},[_c('v-select',_vm._g(_vm._b({ref:\"select-input\",staticClass:\"inline\",class:{'select-input-view': _vm.mode === 'view'},attrs:{\"autoscroll\":true,\"append-to-body\":_vm.appendToBody,\"calculate-position\":_vm.positionDropdown,\"disabled\":_vm.isView || _vm.disabled,\"get-option-key\":function (opt) { return _vm.getOptionKey(opt); },\"get-option-label\":function (opt) { return _vm.getOptionLabel(opt); },\"label\":_vm.optionLabel,\"options\":_vm.options,\"close-on-select\":_vm.closeOnSelect,\"map-keydown\":_vm.mappedKeys,\"placeholder\":_vm.placeholder,\"reduce\":function (x) { return _vm.reduce(x); },\"searchable\":_vm.isSearchable,\"selectable\":_vm.selectable,\"value\":_vm.value != null ? _vm.value : ''},on:{\"input\":function (e) { return _vm.$emit('input', e); },\"search:blur\":_vm.onBlur,\"search:focus\":_vm.onFocus,\"open\":_vm.resizeHandler,\"option:created\":function (e) { return _vm.$emit('createdListItem', e); }},scopedSlots:_vm._u([{key:\"option\",fn:function(option){return [_c('div',{on:{\"mousedown\":function (e) { return _vm.onClickOption(option, e); }}},[_vm._v(\" \"+_vm._s(option.label)+\" \")])]}},_vm._l((_vm.$scopedSlots),function(_,slot){return {key:slot,fn:function(scope){return [_vm._t(slot,null,null,scope)]}}})],null,true)},'v-select',_vm.$attrs,false),_vm.$listeners)),(_vm.tooltip && !_vm.focused)?_c('LabeledTooltip',{attrs:{\"hover\":_vm.hoverTooltip,\"value\":_vm.tooltip,\"status\":_vm.status}}):_vm._e(),(!!_vm.validationMessage)?_c('LabeledTooltip',{attrs:{\"hover\":_vm.hoverTooltip,\"value\":_vm.validationMessage}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { get } from '@shell/utils/object';\nimport LabeledFormElement from '@shell/mixins/labeled-form-element';\nimport VueSelectOverrides from '@shell/mixins/vue-select-overrides';\nimport { LabeledTooltip } from '@components/LabeledTooltip';\nimport { onClickOption, calculatePosition } from '@shell/utils/select';\n\nexport default {\n  components: { LabeledTooltip },\n  mixins:     [LabeledFormElement, VueSelectOverrides],\n  props:      {\n    appendToBody: {\n      default: true,\n      type:    Boolean,\n    },\n    disabled: {\n      default: false,\n      type:    Boolean,\n    },\n    getKeyForOption: {\n      default: null,\n      type:    Function\n    },\n    mode: {\n      default: 'edit',\n      type:    String,\n    },\n    optionKey: {\n      default: null,\n      type:    String,\n    },\n    optionLabel: {\n      default: 'label',\n      type:    String,\n    },\n    placement: {\n      default: null,\n      type:    String,\n    },\n    placeholder: {\n      type:    String,\n      default: '',\n    },\n    popperOverride: {\n      type:    Function,\n      default: null,\n    },\n    reduce: {\n      default: (e) => {\n        if (e && typeof e === 'object' && e.value !== undefined) {\n          return e.value;\n        }\n\n        return e;\n      },\n      type: Function,\n    },\n    tooltip: {\n      type:    String,\n      default: null,\n    },\n\n    hoverTooltip: {\n      type:    Boolean,\n      default: true,\n    },\n\n    status: {\n      type:    String,\n      default: null,\n    },\n    value: {\n      default: null,\n      type:    [String, Object, Number, Array, Boolean],\n    },\n    closeOnSelect: {\n      type:    Boolean,\n      default: true\n    },\n  },\n\n  methods: {\n    // resizeHandler = in mixin\n    getOptionLabel(option) {\n      if (this.$attrs['get-option-label']) {\n        return this.$attrs['get-option-label'](option);\n      }\n      if (get(option, this.optionLabel)) {\n        if (this.localizedLabel) {\n          return this.$store.getters['i18n/t'](get(option, this.optionLabel));\n        } else {\n          return get(option, this.optionLabel);\n        }\n      } else {\n        return option;\n      }\n    },\n\n    positionDropdown(dropdownList, component, { width }) {\n      if (this.popperOverride) {\n        return this.popperOverride(dropdownList, component, { width });\n      }\n\n      calculatePosition(dropdownList, component, width, this.placement);\n    },\n\n    focus() {\n      this.focusSearch();\n    },\n\n    focusSearch() {\n      this.$nextTick(() => {\n        const el = this.$refs['select-input']?.searchEl;\n\n        if ( el ) {\n          el.focus();\n        }\n      });\n    },\n\n    get,\n\n    onClickOption(option, event) {\n      onClickOption.call(this, option, event);\n    },\n    selectable(opt) {\n      // Lets you disable options that are used\n      // for headings on groups of options.\n      if ( opt ) {\n        if ( opt.disabled || opt.kind === 'group' || opt.kind === 'divider' || opt.loading ) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    getOptionKey(opt) {\n      if (opt.optionKey) {\n        return get(opt, opt.optionKey);\n      }\n\n      const label = this.getOptionLabel(opt);\n\n      // label may be type of object\n      if (typeof label === 'string' || typeof label === 'number') {\n        return label;\n      } else {\n        return Math.random(100000);\n      }\n    },\n    report(e) {\n      alert(e);\n    }\n  },\n  computed: {\n    requiredField() {\n      // using \"any\" for a type on \"rule\" here is dirty but the use of the optional chaining operator makes it safe for what we're doing here.\n      return (this.required || this.rules.some(rule => rule?.name === 'required'));\n    },\n    validationMessage() {\n      // we want to grab the required rule passed in if we can but if it's not there then we can just grab it from the formRulesGenerator\n      const requiredRule = this.rules.find(rule => rule?.name === 'required');\n      const ruleMessages = [];\n      const value = this?.value;\n\n      if (requiredRule && this.blurred && !this.focused) {\n        const message = requiredRule(value);\n\n        if (!!message) {\n          return message;\n        }\n      }\n\n      for (const rule of this.rules) {\n        const message = rule(value);\n\n        if (!!message && rule.name !== 'required') { // we're catching 'required' above so we can ignore it here\n          ruleMessages.push(message);\n        }\n      }\n      if (ruleMessages.length > 0 && (this.blurred || this.focused)) {\n        return ruleMessages.join(', ');\n      } else {\n        return undefined;\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <div\n    ref=\"select\"\n    class=\"unlabeled-select\"\n    :class=\"{\n      disabled: disabled && !isView,\n      focused,\n      [mode]: true,\n      [status]: status,\n      taggable: $attrs.taggable,\n      taggable: $attrs.multiple,\n    }\"\n    @focus=\"focusSearch\"\n  >\n    <v-select\n      ref=\"select-input\"\n      v-bind=\"$attrs\"\n      class=\"inline\"\n      :class=\"{'select-input-view': mode === 'view'}\"\n      :autoscroll=\"true\"\n      :append-to-body=\"appendToBody\"\n      :calculate-position=\"positionDropdown\"\n      :disabled=\"isView || disabled\"\n      :get-option-key=\"(opt) => getOptionKey(opt)\"\n      :get-option-label=\"(opt) => getOptionLabel(opt)\"\n      :label=\"optionLabel\"\n      :options=\"options\"\n      :close-on-select=\"closeOnSelect\"\n      :map-keydown=\"mappedKeys\"\n      :placeholder=\"placeholder\"\n      :reduce=\"(x) => reduce(x)\"\n      :searchable=\"isSearchable\"\n      :selectable=\"selectable\"\n      :value=\"value != null ? value : ''\"\n      v-on=\"$listeners\"\n      @input=\"(e) => $emit('input', e)\"\n      @search:blur=\"onBlur\"\n      @search:focus=\"onFocus\"\n      @open=\"resizeHandler\"\n      @option:created=\"(e) => $emit('createdListItem', e)\"\n    >\n      <template #option=\"option\">\n        <div @mousedown=\"(e) => onClickOption(option, e)\">\n          {{ option.label }}\n        </div>\n      </template>\n      <!-- Pass down templates provided by the caller -->\n      <template v-for=\"(_, slot) of $scopedSlots\" v-slot:[slot]=\"scope\">\n        <slot :name=\"slot\" v-bind=\"scope\" />\n      </template>\n    </v-select>\n    <LabeledTooltip\n      v-if=\"tooltip && !focused\"\n      :hover=\"hoverTooltip\"\n      :value=\"tooltip\"\n      :status=\"status\"\n    />\n    <LabeledTooltip\n      v-if=\"!!validationMessage\"\n      :hover=\"hoverTooltip\"\n      :value=\"validationMessage\"\n    />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .unlabeled-select {\n    position: relative;\n\n    ::v-deep .v-select.select-input-view {\n      .vs__actions {\n        visibility: hidden;\n      }\n    }\n\n    ::v-deep .labeled-tooltip.error .status-icon {\n      top: 7px;\n      right: 2px;\n    }\n\n    ::v-deep .vs__selected-options {\n      display: flex;\n\n      .vs__selected {\n          width: 100%;\n      }\n    }\n\n    ::v-deep .v-select.vs--open {\n      .vs__dropdown-toggle {\n        color: var(--outline) !important;\n      }\n    }\n\n    ::v-deep .v-select.vs--open {\n      .vs__dropdown-toggle {\n        color: var(--outline) !important;\n      }\n    }\n\n    @include input-status-color;\n  }\n</style>\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--14-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Select.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--14-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Select.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Select.vue?vue&type=template&id=14e5d451&scoped=true&\"\nimport script from \"./Select.vue?vue&type=script&lang=js&\"\nexport * from \"./Select.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Select.vue?vue&type=style&index=0&id=14e5d451&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"14e5d451\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Select.vue?vue&type=style&index=0&id=14e5d451&prod&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.showRemove && !_vm.isView)?_c('button',{staticClass:\"btn role-link remove-expression\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('remove')}}},[_c('i',{staticClass:\"icon icon-x\"})]):_vm._e(),(_vm.rules.length)?_c('div',{staticClass:\"match-expression-header\",class:{'view':_vm.isView}},[_c('label',[_vm._v(\" \"+_vm._s(_vm.t('workload.scheduling.affinity.matchExpressions.key'))+\" \")]),_c('label',[_vm._v(\" \"+_vm._s(_vm.t('workload.scheduling.affinity.matchExpressions.operator'))+\" \")]),_c('label',[_vm._v(\" \"+_vm._s(_vm.t('workload.scheduling.affinity.matchExpressions.value'))+\" \")]),_c('span')]):_vm._e(),_vm._l((_vm.rules),function(row,index){return _c('div',{key:row.id,staticClass:\"match-expression-row\",class:{'view':_vm.isView, 'mb-10': index !== _vm.rules.length - 1}},[_c('div',{attrs:{\"data-testid\":(\"input-match-expression-key-\" + index)}},[(_vm.isView)?_c('div',[_vm._v(\" \"+_vm._s(row.key)+\" \")]):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(row.key),expression:\"row.key\"}],attrs:{\"mode\":_vm.mode},domProps:{\"value\":(row.key)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(row, \"key\", $event.target.value)},_vm.update]}})]),_c('div',{attrs:{\"data-testid\":(\"input-match-expression-operator-\" + index)}},[(_vm.isView)?_c('div',[_vm._v(\" \"+_vm._s(row.operator)+\" \")]):_c('Select',{staticClass:\"operator single\",attrs:{\"options\":_vm.ops,\"clearable\":false,\"reduce\":function (opt){ return opt.value; },\"mode\":_vm.mode},on:{\"input\":_vm.update},model:{value:(row.operator),callback:function ($$v) {_vm.$set(row, \"operator\", $$v)},expression:\"row.operator\"}})],1),(row.operator==='Exists' || row.operator==='DoesNotExist')?_c('div',{staticClass:\"no-value\"},[_c('label',{staticClass:\"text-muted\"},[_vm._v(\"â€¦\")])]):_c('div',{attrs:{\"data-testid\":(\"input-match-expression-values-\" + index)}},[(_vm.isView)?_c('div',[_vm._v(\" \"+_vm._s(row.values)+\" \")]):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(row.values),expression:\"row.values\"}],attrs:{\"mode\":_vm.mode,\"disabled\":row.operator==='Exists' || row.operator==='DoesNotExist'},domProps:{\"value\":(row.values)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(row, \"values\", $event.target.value)},_vm.update]}})]),_c('div',{staticClass:\"remove-container\"},[(!_vm.isView)?_c('button',{staticClass:\"btn role-link\",style:({padding:'0px'}),attrs:{\"type\":\"button\",\"disabled\":_vm.mode==='view'},on:{\"click\":function($event){return _vm.removeRule(row)}}},[_c('t',{attrs:{\"k\":\"generic.remove\"}})],1):_vm._e()])])}),(!_vm.isView)?_c('div',{staticClass:\"mt-20\"},[_c('button',{staticClass:\"btn role-tertiary add\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.addRule}},[_c('t',{attrs:{\"k\":\"workload.scheduling.affinity.matchExpressions.addRule\"}})],1)]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { NODE, POD } from '@shell/config/types';\nimport Select from '@shell/components/form/Select';\nimport { mapGetters } from 'vuex';\nimport { isArray, removeObject } from '@shell/utils/array';\nimport { clone } from '@shell/utils/object';\nimport { convert, simplify } from '@shell/utils/selector';\n\nexport default {\n  components: { Select },\n  props:      {\n    // Array of actual match expressions\n    // or k8s selector Object of {matchExpressions, matchLabels}\n    value: {\n      type:     [Array, Object],\n      default: () => []\n    },\n\n    // CRU mode\n    mode: {\n      type:    String,\n      default: 'edit'\n    },\n\n    // pod/node affinity types have different operator options\n    type: {\n      type:    String,\n      default: NODE\n    },\n\n    // whether or not to show an initial empty row of inputs when value is empty in editing modes\n    initialEmptyRow: {\n      type:    Boolean,\n      default: false,\n    },\n\n    // whether or not to show remove button in upper right\n    showRemove: {\n      type:    Boolean,\n      default: true\n    }\n  },\n\n  data() {\n    const t = this.$store.getters['i18n/t'];\n\n    const podOptions = [\n      { label: t('workload.scheduling.affinity.matchExpressions.in'), value: 'In' },\n      { label: t('workload.scheduling.affinity.matchExpressions.notIn'), value: 'NotIn' },\n      { label: t('workload.scheduling.affinity.matchExpressions.exists'), value: 'Exists' },\n      { label: t('workload.scheduling.affinity.matchExpressions.doesNotExist'), value: 'DoesNotExist' },\n    ];\n\n    const nodeOptions = [\n      { label: t('workload.scheduling.affinity.matchExpressions.in'), value: 'In' },\n      { label: t('workload.scheduling.affinity.matchExpressions.notIn'), value: 'NotIn' },\n      { label: t('workload.scheduling.affinity.matchExpressions.exists'), value: 'Exists' },\n      { label: t('workload.scheduling.affinity.matchExpressions.doesNotExist'), value: 'DoesNotExist' },\n      { label: t('workload.scheduling.affinity.matchExpressions.lessThan'), value: 'Lt' },\n      { label: t('workload.scheduling.affinity.matchExpressions.greaterThan'), value: 'Gt' },\n    ];\n\n    const ops = this.type === NODE ? nodeOptions : podOptions;\n\n    let rules;\n\n    if ( isArray(this.value) ) {\n      rules = [...this.value];\n    } else {\n      rules = convert(this.value.matchLabels, this.value.matchExpressions);\n    }\n\n    rules = rules.map((rule) => {\n      const newRule = clone(rule);\n\n      if (newRule.values && typeof newRule.values !== 'string') {\n        newRule.values = newRule.values.join(', ');\n      }\n\n      return newRule;\n    });\n\n    if (!rules.length && this.initialEmptyRow && !this.isView) {\n      rules.push({\n        key:      '',\n        operator: 'In',\n        values:   ''\n      });\n    }\n\n    return {\n      ops,\n      rules,\n      custom: []\n    };\n  },\n\n  computed: {\n    isView() {\n      return this.mode === 'view';\n    },\n\n    node() {\n      return NODE;\n    },\n\n    pod() {\n      return POD;\n    },\n\n    ...mapGetters({ t: 'i18n/t' })\n  },\n\n  methods: {\n    removeRule(row) {\n      removeObject(this.rules, row);\n      this.update();\n    },\n\n    addRule() {\n      this.rules.push({\n        key:      '',\n        operator: 'In',\n        values:   ''\n      });\n    },\n\n    update() {\n      this.$nextTick(() => {\n        const out = this.rules.map((rule) => {\n          const matchExpression = { key: rule.key, operator: rule.operator };\n          let val = (rule.values || '').trim();\n\n          if ( rule.operator === 'Exists' || rule.operator === 'DoesNotExist') {\n            val = null;\n          } else if (!val) {\n            return;\n          }\n\n          if ( val !== null ) {\n            matchExpression.values = val.split(/\\s*,\\s*/).filter(x => !!x);\n          }\n\n          return matchExpression;\n        }).filter(x => !!x);\n\n        if ( isArray(this.value) ) {\n          this.$emit('input', out);\n        } else {\n          this.$emit('input', simplify(out));\n        }\n      });\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <button\n      v-if=\"showRemove && !isView\"\n      type=\"button\"\n      class=\"btn role-link remove-expression\"\n      @click=\"$emit('remove')\"\n    >\n      <i class=\"icon icon-x\" />\n    </button>\n\n    <div\n      v-if=\"rules.length\"\n      class=\"match-expression-header\"\n      :class=\"{'view':isView}\"\n    >\n      <label>\n        {{ t('workload.scheduling.affinity.matchExpressions.key') }}\n      </label>\n      <label>\n        {{ t('workload.scheduling.affinity.matchExpressions.operator') }}\n      </label>\n      <label>\n        {{ t('workload.scheduling.affinity.matchExpressions.value') }}\n      </label>\n      <span />\n    </div>\n    <div\n      v-for=\"(row, index) in rules\"\n      :key=\"row.id\"\n      class=\"match-expression-row\"\n      :class=\"{'view':isView, 'mb-10': index !== rules.length - 1}\"\n    >\n      <div\n        :data-testid=\"`input-match-expression-key-${index}`\"\n      >\n        <div v-if=\"isView\">\n          {{ row.key }}\n        </div>\n        <input\n          v-else\n          v-model=\"row.key\"\n          :mode=\"mode\"\n          @input=\"update\"\n        />\n      </div>\n      <div\n        :data-testid=\"`input-match-expression-operator-${index}`\"\n      >\n        <div v-if=\"isView\">\n          {{ row.operator }}\n        </div>\n        <Select\n          v-else\n          v-model=\"row.operator\"\n          class=\"operator single\"\n          :options=\"ops\"\n          :clearable=\"false\"\n          :reduce=\"opt=>opt.value\"\n          :mode=\"mode\"\n          @input=\"update\"\n        />\n      </div>\n\n      <div\n        v-if=\"row.operator==='Exists' || row.operator==='DoesNotExist'\"\n        class=\"no-value\"\n      >\n        <label class=\"text-muted\">&hellip;</label>\n      </div>\n      <div\n        v-else\n        :data-testid=\"`input-match-expression-values-${index}`\"\n      >\n        <div v-if=\"isView\">\n          {{ row.values }}\n        </div>\n        <input\n          v-else\n          v-model=\"row.values\"\n          :mode=\"mode\"\n          :disabled=\"row.operator==='Exists' || row.operator==='DoesNotExist'\"\n          @input=\"update\"\n        />\n      </div>\n      <div class=\"remove-container\">\n        <button\n          v-if=\"!isView\"\n          type=\"button\"\n          class=\"btn role-link\"\n          :style=\"{padding:'0px'}\"\n\n          :disabled=\"mode==='view'\"\n          @click=\"removeRule(row)\"\n        >\n          <t k=\"generic.remove\" />\n        </button>\n      </div>\n    </div>\n    <div v-if=\"!isView\" class=\"mt-20\">\n      <button\n        type=\"button\"\n        class=\"btn role-tertiary add\"\n        @click=\"addRule\"\n      >\n        <t k=\"workload.scheduling.affinity.matchExpressions.addRule\" />\n      </button>\n    </div>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n  $separator: 20;\n  $remove: 75;\n  $spacing: 10px;\n\n  .operator {\n    & .vs__dropdown-option{\n      padding: 3px 6px 3px 6px !important\n    }\n  }\n\n  .remove-expression {\n    padding:  8px;\n    position: absolute;\n    margin-bottom:10px;\n    right: 0px;\n    top: 0px;\n    z-index: z-index('overContent');\n\n    i {\n      font-size:2em;\n    }\n  }\n\n  .remove-container {\n    display: flex;\n    justify-content: center;\n  }\n\n  .match-expression-row, .match-expression-header {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    margin: 5px 0;\n    grid-gap: 10px;\n\n    & > LABEL {\n      margin: 0;\n    }\n\n    &:not(.view){\n      grid-template-columns: 1fr 1fr 1fr 100px;\n    }\n  }\n</style>\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--14-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchExpressions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--14-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchExpressions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MatchExpressions.vue?vue&type=template&id=cb2d95b2&scoped=true&\"\nimport script from \"./MatchExpressions.vue?vue&type=script&lang=js&\"\nexport * from \"./MatchExpressions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MatchExpressions.vue?vue&type=style&index=0&id=cb2d95b2&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cb2d95b2\",\n  null\n  \n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".clearfix[data-v-14e5d451]:after,.clearfix[data-v-14e5d451]:before{content:\\\" \\\";display:table}.clearfix[data-v-14e5d451]:after{clear:both}.list-unstyled[data-v-14e5d451]{margin:0;padding:0;list-style-type:none}.no-select[data-v-14e5d451]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-14e5d451]{resize:none}.hand[data-v-14e5d451]{cursor:pointer;cursor:hand}.fixed[data-v-14e5d451]{table-layout:fixed}.clip[data-v-14e5d451]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-14e5d451],.force-wrap[data-v-14e5d451]{word-wrap:break-word}.force-wrap[data-v-14e5d451]{white-space:normal}.bordered-section[data-v-14e5d451]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-14e5d451]{margin-bottom:20px;margin-top:20px}.unlabeled-select[data-v-14e5d451]{position:relative}.unlabeled-select[data-v-14e5d451]  .v-select.select-input-view .vs__actions{visibility:hidden}.unlabeled-select[data-v-14e5d451]  .labeled-tooltip.error .status-icon{top:7px;right:2px}.unlabeled-select[data-v-14e5d451]  .vs__selected-options{display:flex}.unlabeled-select[data-v-14e5d451]  .vs__selected-options .vs__selected{width:100%}.unlabeled-select[data-v-14e5d451]  .v-select.vs--open .vs__dropdown-toggle{color:var(--outline)!important}.unlabeled-select.focused.success[data-v-14e5d451],.unlabeled-select.success[data-v-14e5d451]{border:solid 1px var(--success)}.unlabeled-select.focused.success .selected[data-v-14e5d451],.unlabeled-select.focused.success .vs__actions[data-v-14e5d451]:after,.unlabeled-select.focused.success input[data-v-14e5d451],.unlabeled-select.success .selected[data-v-14e5d451],.unlabeled-select.success .vs__actions[data-v-14e5d451]:after,.unlabeled-select.success input[data-v-14e5d451]{color:var(--success)}.unlabeled-select.focused.warning[data-v-14e5d451],.unlabeled-select.warning[data-v-14e5d451]{border:solid 1px var(--warning)}.unlabeled-select.focused.warning .selected[data-v-14e5d451],.unlabeled-select.focused.warning .vs__actions[data-v-14e5d451]:after,.unlabeled-select.focused.warning input[data-v-14e5d451],.unlabeled-select.warning .selected[data-v-14e5d451],.unlabeled-select.warning .vs__actions[data-v-14e5d451]:after,.unlabeled-select.warning input[data-v-14e5d451]{color:var(--warning)}.unlabeled-select.error[data-v-14e5d451],.unlabeled-select.focused.error[data-v-14e5d451]{border:solid 1px var(--error)}.unlabeled-select.error .vs__actions[data-v-14e5d451]:after,.unlabeled-select.error>label[data-v-14e5d451],.unlabeled-select.focused.error .vs__actions[data-v-14e5d451]:after,.unlabeled-select.focused.error>label[data-v-14e5d451]{color:var(--error)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchExpressions.vue?vue&type=style&index=0&id=cb2d95b2&prod&lang=scss&scoped=true&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Select.vue?vue&type=style&index=0&id=14e5d451&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7c62ed2f\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".clearfix[data-v-cb2d95b2]:after,.clearfix[data-v-cb2d95b2]:before{content:\\\" \\\";display:table}.clearfix[data-v-cb2d95b2]:after{clear:both}.list-unstyled[data-v-cb2d95b2]{margin:0;padding:0;list-style-type:none}.no-select[data-v-cb2d95b2]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-cb2d95b2]{resize:none}.hand[data-v-cb2d95b2]{cursor:pointer;cursor:hand}.fixed[data-v-cb2d95b2]{table-layout:fixed}.clip[data-v-cb2d95b2]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-cb2d95b2],.force-wrap[data-v-cb2d95b2]{word-wrap:break-word}.force-wrap[data-v-cb2d95b2]{white-space:normal}.bordered-section[data-v-cb2d95b2]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-cb2d95b2]{margin-bottom:20px;margin-top:20px}.operator .vs__dropdown-option[data-v-cb2d95b2]{padding:3px 6px 3px 6px!important}.remove-expression[data-v-cb2d95b2]{padding:8px;position:absolute;margin-bottom:10px;right:0;top:0;z-index:2}.remove-expression i[data-v-cb2d95b2]{font-size:2em}.remove-container[data-v-cb2d95b2]{display:flex;justify-content:center}.match-expression-header[data-v-cb2d95b2],.match-expression-row[data-v-cb2d95b2]{display:grid;grid-template-columns:1fr 1fr 1fr;margin:5px 0;grid-gap:10px}.match-expression-header>LABEL[data-v-cb2d95b2],.match-expression-row>LABEL[data-v-cb2d95b2]{margin:0}.match-expression-header[data-v-cb2d95b2]:not(.view),.match-expression-row[data-v-cb2d95b2]:not(.view){grid-template-columns:1fr 1fr 1fr 100px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchExpressions.vue?vue&type=style&index=0&id=cb2d95b2&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7772c2b6\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"sourceRoot":""}